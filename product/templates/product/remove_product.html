{% extends "base.html" %}

{% block content %}
<h1>Remove Product</h1>

<form method="get" action=".">
    <label for="search">Search by code or name:</label>
    <input type="text" name="search" id="search" value="{{ search_query|default_if_none:'' }}">
    <button type="submit">Search</button>
</form>

{% if search_query %}
    <h3>Search Results:</h3>
    {% if search_results %}
        <ul>
        {% for product in search_results %}
            <li>{{ product.code }} - {{ product.name }}</li>
        {% endfor %}
        </ul>
    {% else %}
        <p>No products found matching "{{ search_query }}".</p>
    {% endif %}
{% endif %}

<hr>

<form method="post" onsubmit="return confirm('Are you sure you want to delete this product?');">
    {% csrf_token %}
    <label for="product_select">Select product to remove:</label>
    <select name="product_id" id="product_select" required>
        <option value="">-- Select a product --</option>
        {% for product in products %}
            <option value="{{ product.id }}">{{ product.name }} ({{ product.code }})</option>
        {% endfor %}
    </select>
    <button type="submit">Remove Product</button>
</form>

{% endblock %}