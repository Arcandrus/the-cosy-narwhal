{% extends "base.html" %}
{% load static %}

{% block content %}

<div class="container">

    <h1 class="logo-font">{{ product.name }}</h1>

    <div class="row">
        <div class="col-12 col-md-6 mb-4">
            <img id="product-img" class="product-img img-fluid mt-4" src="{{ MEDIA_URL }}{{ product.image }}">
        </div>
        <div class="col-12 col-md-6 text-left mt-4">
            {% if product.inventory == 0 %}
            <p><strong>Sorry this product is currently out of stock</strong></p>
            {% endif %}
            <p>{{ product.description }}</p>
            <p>Price: Â£{{ product.price }}</p>
            {% if product.has_colors %}
            <label for="color-select"><strong>Choose a color:</strong></label>
            <select id="color-select" name="color" class="form-select mb-3">
                {% for color_name, link_id in color_links %}
                <option value="{{ link_id }}" {% if product.id == link_id %}selected{% endif %}>
                    {{ color_name|title }}
                </option>
                {% endfor %}
            </select>
            {% endif %}
        </div>
    </div>

</div>
<script>
    document.getElementById('color-select')?.addEventListener('change', function () {
        const selectedProductId = this.value;
        if (selectedProductId) {
            window.location.href = `/product/${selectedProductId}/`;
        }
    });
</script>
{% endblock %}